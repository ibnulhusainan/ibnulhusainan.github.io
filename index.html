<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<title></title>
	<link rel="stylesheet" href="">
</head>
<body>
	<h1>BismiLLAH</h1>
	<script>
	    function u2b(str) {
		return btoa(encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, function(match, p1) {
		    return String.fromCharCode('0x' + p1);
		}));
	    }
	    fetch("https://app.sandbox.midtrans.com/snap/v1/transactions",{
		method: "post",
		headers: {
		  "Content-Type": "application/json",
		  Accept: "application/json",
		  Authorization:
		    "Basic " + u2b("SB-Mid-server-GwUP_WGbJPXsDzsNEBRs8IYA")
		},
		body:
		  // Below is the HTTP request body in JSON
		  {
		    transaction_details: {
		      order_id: "order-csb-" + Math.random(),
		      gross_amount: 10000
		    },
		    credit_card: {
		      secure: true
		    },
		    customer_details: {
		      first_name: "Johny",
		      last_name: "Kane",
		      email: "testmidtrans@mailnesia.com",
		      phone: "08111222333"
		    }
		  }
	      }).then( snapResponse => { 
		  let snapToken = snapResponse.data.token;
		  console.log("Retrieved snap token:", snapToken);
		})

	</script>
</body>
</html>
